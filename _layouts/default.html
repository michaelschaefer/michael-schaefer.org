{% capture locale %}{{ page.url | truncate: 3, "" | remove: "/" }}{% endcapture %}
{% unless site.authorized_locales contains locale %}
{% assign locale = site.default_locale %}
{% endunless %}

<!DOCTYPE html>
<html lang="{{ locale }}">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>
    {{ site.name }}{% if page.title %}&nbsp;|| {{ page.title }}{% endif %}
  </title>
  <meta name="viewport" content="width=device-width, initial-scale=1">  

  <link rel="shortcut icon" href="/media/favicon.ico" />

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/main.css">

  <!-- syntax highlighting CSS -->
  <link rel="stylesheet" href="/css/syntax.css">

  <script type="text/javascript">
    var nPhotos = 5;

    window.onunload = function() {
      var tag = document.getElementById("header_switcher");
      if (tag.checked != undefined) {
        window.name = tag.checked;
      } else {        
        window.name = ""
      }            
    }
  
    window.onload = function() {
      var hide = false;
      if (window.name == "true") {
        hide = true;
      }

      var tag = document.getElementById("header_switcher");
      if (hide == true) {
        tag.checked = true;
      }
    }

    function switch_image(direction) {      
      var banner = document.getElementById("header_image");
      var style = banner.currentStyle || window.getComputedStyle(banner, false);
      var bgUrl = style.backgroundImage;
      var number = Math.floor(bgUrl.substring(bgUrl.lastIndexOf("/")+1, bgUrl.lastIndexOf(".")));

      if (direction == 1) {
        number = (number == nPhotos) ? 1 : number + 1;
      } else {
        number = (number == 1) ? nPhotos : number - 1;
      }

      banner.style.backgroundImage = "url(\"/media/photo/0" + number + ".jpg\")";
    }
  </script>

</head>

<body>  

  <input type="checkbox" id="header_switcher" />
  <header>       
    {% include header.html %}
  </header>   

  <div id="container">                

    <nav>
      {% include navigation.html %}
    </nav>    

    <main>
      {{ content }}
    </main>

    <footer>
      &copy; 2014 Michael Schaefer<br/>
    </footer>

  </div> 

</body>
</html>
